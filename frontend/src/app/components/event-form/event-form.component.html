<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center">
    <h1>EventPlanner</h1>
    <button class="btn btn-danger" routerLink="/events">Return To Events</button>
  </div>

  <!-- Afficher une alerte si elle existe -->
  <div *ngIf="alertMessage" class="alert alert-info mt-3">
    {{ alertMessage }}
  </div>

  <div class="row mt-4">
    <div class="form-container col-12 col-md-8 offset-md-2">
      <h2>Add New Event</h2>
      <!-- Liaison du formulaire rÃ©actif -->
      <form [formGroup]="eventForm" (ngSubmit)="onSubmit()">
        <!-- Title -->
        <div class="form-group">
          <label for="title">Event Title</label>
          <input
            type="text"
            id="title"
            formControlName="title"
            class="form-control"
            placeholder="Enter event title"
          />
          <div *ngIf="eventForm.get('title')?.touched && eventForm.get('title')?.invalid" class="text-danger">
            <div *ngIf="eventForm.get('title')?.errors?.['required']">Title is required.</div>
            <div *ngIf="eventForm.get('title')?.errors?.['minlength']">Title must be at least 3 characters long.</div>
            <div *ngIf="eventForm.get('title')?.errors?.['pattern']">Title must only contain letters, numbers, and spaces.</div>
          </div>
        </div>

        <!-- Date -->
        <div class="form-group">
          <label for="date">Event Date</label>
          <input
            type="date"
            id="date"
            formControlName="date"
            class="form-control"
            [min]="minDate"
          />
          <div *ngIf="eventForm.get('date')?.touched && eventForm.get('date')?.invalid" class="text-danger">
            <div *ngIf="eventForm.get('date')?.errors?.['required']">Date is required.</div>
          </div>
        </div>

        <!-- Location -->
        <div class="form-group">
          <label for="location">Location</label>
          <input
            type="text"
            id="location"
            formControlName="location"
            class="form-control"
            placeholder="Enter location"
          />
          <div *ngIf="eventForm.get('location')?.touched && eventForm.get('location')?.invalid" class="text-danger">
            <div *ngIf="eventForm.get('location')?.errors?.['required']">Location is required.</div>
            <div *ngIf="eventForm.get('location')?.errors?.['minlength']">Location must be at least 2 characters long.</div>
          </div>
        </div>

        <!-- Description -->
        <div class="form-group">
          <label for="description">Description</label>
          <textarea
            id="description"
            formControlName="description"
            class="form-control"
            rows="4"
            placeholder="Write a description..."
          ></textarea>
          <div *ngIf="eventForm.get('description')?.touched && eventForm.get('description')?.invalid" class="text-danger">
            <div *ngIf="eventForm.get('description')?.errors?.['required']">Description is required.</div>
            <div *ngIf="eventForm.get('description')?.errors?.['minlength']">Description must be at least 10 characters long.</div>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="form-group text-center">
          <button type="submit" class="btn btn-danger" [disabled]="eventForm.invalid">Submit Event</button>
        </div>
      </form>
    </div>
  </div>
</div>
