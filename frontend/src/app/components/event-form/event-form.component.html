<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center">
    <h1>EventPlanner</h1>
    <button class="btn btn-outline-primary px-4 py-2 rounded shadow-md" routerLink="/events">Return To Events</button>
  </div>

  <div *ngIf="alertMessage" class="alert alert-info mt-3">
    {{ alertMessage }}
  </div>

  <div class="row mt-4">
    <app-form-container 
      [title]="'Add New Event'" 
      [submitText]="'Submit Event'"
      (formSubmit)="onSubmit()"
      [formGroup]="eventForm"
    >

      <app-input
        label="Event Title"
        type="text"
        placeholder="Enter event title"
        formControlName="title"
        [errorMessage]="getTitleErrorMessage()"
      ></app-input>

      <app-input
        label="Event Date"
        type="date"
        formControlName="date"
        [errorMessage]="getDateErrorMessage()"
      ></app-input>

      <app-input
        label="Location"
        type="text"
        placeholder="Enter location"
        formControlName="location"
        [errorMessage]="getLocationErrorMessage()"
      ></app-input>

      <app-input
        label="Description"
        type="textarea"
        placeholder="Write a description..."
        formControlName="description"
        [errorMessage]="getDescriptionErrorMessage()"
      ></app-input>

      <app-input
        label="Price"
        type="number"
        placeholder="Enter price"
        formControlName="price"
        [errorMessage]="getPriceErrorMessage()"
      ></app-input>

      <app-input
        label="Capacity"
        type="number"
        placeholder="Enter capacity"
        formControlName="capacity"
        [errorMessage]="getCapacityErrorMessage()"
      ></app-input>
      <!-- Add a file input field for image upload -->
      <div class="form-group">
        <label for="image">Event Image (Optional)</label>
        <input
          type="file"
          id="image"
          class="form-control"
          (change)="onFileChange($event)"
          accept="image/*"
        />
        <small class="form-text text-muted">Upload an image for your event (optional).</small>
      </div>
    </app-form-container>
  </div>

  <div class="debug-info" *ngIf="false"> <!-- Set to true temporarily -->
    <pre>Form valid: {{ eventForm?.valid }}</pre>
    <pre>Form value: {{ eventForm?.value | json }}</pre>
    <pre>title errors: {{ eventForm?.get('title')?.errors | json }}</pre>
    <pre>price errors: {{ eventForm?.get('price')?.errors | json }}</pre>
    <pre>capacity errors: {{ eventForm?.get('capacity')?.errors | json }}</pre>
  </div>
</div>